(function(t){function e(e){for(var o,a,c=e[0],r=e[1],l=e[2],h=0,d=[];h<c.length;h++)a=c[h],Object.prototype.hasOwnProperty.call(s,a)&&s[a]&&d.push(s[a][0]),s[a]=0;for(o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o]);u&&u(e);while(d.length)d.shift()();return i.push.apply(i,l||[]),n()}function n(){for(var t,e=0;e<i.length;e++){for(var n=i[e],o=!0,c=1;c<n.length;c++){var r=n[c];0!==s[r]&&(o=!1)}o&&(i.splice(e--,1),t=a(a.s=n[0]))}return t}var o={},s={app:0},i=[];function a(e){if(o[e])return o[e].exports;var n=o[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=t,a.c=o,a.d=function(t,e,n){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)a.d(n,o,function(e){return t[e]}.bind(null,o));return n},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="/edit/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],r=c.push.bind(c);c.push=e,c=c.slice();for(var l=0;l<c.length;l++)e(c[l]);var u=r;i.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"20b4":function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var o=n("2b0e"),s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app",tabindex:"0"},on:{paste:t.onPaste,keyup:[function(e){return!e.type.indexOf("key")&&67!==e.keyCode&&t._k(e.keyCode,"c",void 0,e.key,void 0)?null:e.ctrlKey?e.shiftKey||e.altKey||e.metaKey?null:t.copySelection(e):null},function(e){return!e.type.indexOf("key")&&88!==e.keyCode&&t._k(e.keyCode,"x",void 0,e.key,void 0)?null:e.ctrlKey?e.shiftKey||e.altKey||e.metaKey?null:t.cutSelection(e):null},function(e){return!e.type.indexOf("key")&&90!==e.keyCode&&t._k(e.keyCode,"z",void 0,e.key,void 0)?null:e.ctrlKey?e.shiftKey||e.altKey||e.metaKey?null:t.undo(e):null},function(e){return!e.type.indexOf("key")&&89!==e.keyCode&&t._k(e.keyCode,"y",void 0,e.key,void 0)?null:e.ctrlKey?e.shiftKey||e.altKey||e.metaKey?null:t.redo(e):null},function(e){return e.ctrlKey||e.shiftKey||e.altKey||e.metaKey?null:t.onKeyUp(e)}],mouseup:t.onMouseUp,mousedown:t.onMouseDown,mousemove:t.onMouseMove}},[n("tool-bar",{attrs:{"active-tool":t.tool,"active-color":t.lineColor,"line-thickness":t.lineWidth},on:{"select-tool":t.onSelectTool,"select-color":t.onSelectColor,"select-line-thickness":t.onSelectLineThickness}}),n("img",{ref:"offscreenImage",staticClass:"offscreen"}),n("div",{ref:"canvasContainer",staticClass:"canvas-container",style:t.canvasContainerStyle}),t.showStatusBar?n("status-bar",{attrs:{value:t.statusMessage}}):t._e()],1)},i=[],a=(n("4160"),n("d3b7"),n("3ca3"),n("159b"),n("ddb0"),n("2b3d"),n("54f8")),c=n("fc11"),r=(n("13d5"),n("b64b"),1),l="#EB6F09",u={LINE:"line",PATH:"path",RECT:"rect",ARROW:"arrow",SELECT:"select"},h=Object.keys(u).reduce((function(t,e,n){return t[e]=n+1,t}),{}),d=Object.keys(u).reduce((function(t,e,n){return t[n+1]=e,t}),{}),f=["#E3310E","#D2DB1F","#9808D1"],v=f[0],p={WIDTH:900,HEIGHT:600},y=n("d0ff"),k=function(t,e){var n=e.x,o=e.y,s=e.dx,i=e.dy,a=e.color,c=void 0===a?v:a,l=e.thickness,u=void 0===l?r:l;t.strokeStyle=c,t.lineWidth=u,t.beginPath(),t.moveTo(n,o),t.lineTo(s,i),t.stroke();var h=Math.atan2(i-o,s-n);t.save(),t.translate(s,i),t.rotate(h-1.1*Math.PI),t.beginPath(),t.moveTo(0,0),t.lineTo(20,20),t.stroke(),t.restore(),t.save(),t.translate(s,i),t.rotate(h+.6*Math.PI),t.beginPath(),t.moveTo(0,0),t.lineTo(20,20),t.stroke(),t.restore()},b=function(t){var e,n=t||{},o=n.width,s=n.height,i=n.classes,a=void 0===i?[]:i,c=document.createElement("canvas");(c.width=o,c.height=s,a.length)&&(e=c.classList).add.apply(e,Object(y["a"])(a));return c},g=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"tool-bar"},[n("div",{staticClass:"tools"},t._l(t.tools,(function(e){return n("div",{key:e.name,staticClass:"tool-button",class:{selected:t.activeTool===e.name},attrs:{name:e.name},on:{click:function(n){return t.selectTool(e.name)}}},[t._v(" "+t._s(e.keyboardKey)+" "+t._s(e.name)+" ")])})),0),n("div",{staticClass:"color-controls"},t._l(t.colors,(function(e){return n("div",{key:e,staticClass:"color-control",class:{selected:e===t.activeColor},style:{backgroundColor:e},on:{click:function(n){return t.selectColor(e)}}})})),0),n("div",{staticClass:"thickness-controls"},[n("div",{staticClass:"thicknes-button",class:{selected:1===t.lineThickness},on:{click:function(e){return t.selectLineThickness(1)}}},[t._v("1.0x")]),n("div",{staticClass:"thicknes-button",class:{selected:2.5===t.lineThickness},on:{click:function(e){return t.selectLineThickness(2.5)}}},[t._v("2.5x")]),n("div",{staticClass:"thicknes-button",class:{selected:5===t.lineThickness},on:{click:function(e){return t.selectLineThickness(5)}}},[t._v("5.0x")])]),n("div",{staticClass:"info"},[t._v(" Use keyboard: Ctrl + C | Ctrl + X | Ctrl + V ")])])},C=[],m=(n("a9e3"),{name:"ToolBar",props:{activeTool:{type:String,required:!0},activeColor:{type:String,required:!0},lineThickness:{type:Number,required:!0}},computed:{tools:function(){var t=[];return Object.keys(u).forEach((function(e){t.push({name:u[e],keyboardKey:h[e]})})),t.sort((function(t,e){return t.keyboardKey-e.keyboardKey})),t},colors:function(){return Object(y["a"])(f)}},methods:{selectTool:function(t){this.$emit("select-tool",t)},selectColor:function(t){this.$emit("select-color",t)},selectLineThickness:function(t){this.$emit("select-line-thickness",t)}}}),S=m,x=(n("7d41"),n("2877")),w=Object(x["a"])(S,g,C,!1,null,"9294ee70",null),T=w.exports,L=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"status-bar"},[t._v(" "+t._s(t.value)+" ")])},O=[],_={name:"StatusBar",props:{value:{type:String,default:""}}},K=_,j=(n("b5b1"),Object(x["a"])(K,L,O,!1,null,"2b2b979a",null)),M=j.exports,P={name:"App",components:{ToolBar:T,StatusBar:M},data:function(){return{tool:u.PATH,mousePressed:!1,startX:0,startY:0,selection:void 0,lineColor:v,lineWidth:r,statusMessage:"",canvasStack:[],redoCanvasStack:[]}},computed:{showStatusBar:function(){return""!==this.statusMessage},topLayerCtx:function(){return this.canvasStack.length<1?null:this.canvasStack[this.canvasStack.length-1].getContext("2d")},canvasWidth:function(){return this.topLayerCtx?this.topLayerCtx.canvas.width:p.WIDTH},canvasHeight:function(){return this.topLayerCtx?this.topLayerCtx.canvas.height:p.HEIGHT},canvasContainerStyle:function(){return{width:"".concat(this.canvasWidth,"px"),height:"".concat(this.canvasHeight,"px")}}},mounted:function(){this.pushCanvas(this.canvasWidth,this.canvasHeight,!0)},methods:{clearRedoStack:function(){this.redoCanvasStack.forEach((function(t){t.remove()})),this.redoCanvasStack=[]},pushCanvas:function(t,e,n){this.clearRedoStack();var o=["canvas"];n&&o.push("background-layer-canvas");var s=b({width:t,height:e,classes:o});this.canvasStack.push(s),this.$refs.canvasContainer.append(s)},popCanvas:function(){if(!(this.canvasStack.length<2)){var t=this.canvasStack.pop();t.remove()}},undo:function(){if(!(this.canvasStack.length<2)){var t=this.canvasStack.pop();t.hidden=!0,this.redoCanvasStack.push(t)}},redo:function(){var t=this.redoCanvasStack.pop();t&&(t.hidden=!1,this.canvasStack.push(t))},resetSelection:function(){this.selection&&(this.selection=void 0,this.popCanvas())},resetLineStyle:function(){this.topLayerCtx.strokeStyle=this.lineColor,this.topLayerCtx.lineWidth=this.lineWidth,this.topLayerCtx.setLineDash([])},onMouseDown:function(t){this.pushCanvas(this.canvasWidth,this.canvasHeight),this.resetSelection(),this.mousePressed=!0;var e=this.toCanvasCoords(t.clientX,t.clientY),n=e.x,o=e.y;this.startX=n,this.startY=o,this.resetLineStyle(),"path"===this.tool&&(this.topLayerCtx.beginPath(),this.topLayerCtx.moveTo(n,o))},onMouseMove:function(t){if(this.mousePressed){var e=this.toCanvasCoords(t.clientX,t.clientY),n=e.x,o=e.y,s=this.topLayerCtx,i=this.startX,a=this.startY;switch(this.tool){case"path":s.lineTo(n,o),s.stroke();break;case"line":s.clearRect(0,0,s.canvas.width,s.canvas.height),s.beginPath(),s.moveTo(i,a),s.lineTo(n,o),s.stroke();break;case"rect":s.clearRect(0,0,s.canvas.width,s.canvas.height),s.strokeRect(i,a,n-i,o-a);break;case"select":s.setLineDash([15,5]),s.strokeStyle=l,s.lineWidth=r,s.clearRect(0,0,s.canvas.width,s.canvas.height),s.strokeRect(i,a,n-i,o-a);break;case"arrow":s.clearRect(0,0,s.canvas.width,s.canvas.height),k(s,{x:i,y:a,dx:n,dy:o,color:this.lineColor,thickness:this.lineWidth});break;default:break}}},onMouseUp:function(t){this.mousePressed=!1;var e=this.toCanvasCoords(t.clientX,t.clientY),n=e.x,o=e.y;if("select"===this.tool){var s=this.startX,i=this.startY;this.selection={x:s,y:i,width:n-s,height:o-i}}},copySelection:function(){var t=this,e=this.selection;if(e){var n=b({width:e.width,height:e.height});this.canvasStack.forEach((function(o,s){s!==t.canvasStack.length-1&&n.getContext("2d").drawImage(o,e.x,e.y,e.width,e.height,0,0,e.width,e.height)})),n.toBlob((function(e){var n=new ClipboardItem(Object(c["a"])({},e.type,e));navigator.clipboard.write([n]).then((function(){return t.setStatusMessage("Copied to clipboard",2)}))}),"image/png",1)}},cutSelection:function(){var t=this.selection;t&&(this.copySelection(),this.canvasStack.forEach((function(e){e.getContext("2d").clearRect(t.x,t.y,t.width,t.height)})),this.topLayerCtx.clearRect(0,0,this.topLayerCtx.canvas.width,this.topLayerCtx.canvas.height),this.resetSelection())},onKeyUp:function(t){switch(t.code){case"Digit1":this.tool=u[d[1]];break;case"Digit2":this.tool=u[d[2]];break;case"Digit3":this.tool=u[d[3]];break;case"Digit4":this.tool=u[d[4]];break;case"Digit5":this.tool=u[d[5]];break}},setStatusMessage:function(t,e){var n=this;this.statusMessage=t,window.setTimeout((function(){n.statusMessage=""}),1e3*e)},onPaste:function(t){var e,n=this,o=this.$refs.offscreenImage,s=(t.clipboardData||t.originalEvent.clipboardData).items,i=Object(a["a"])(s);try{for(i.s();!(e=i.n()).done;){var c=e.value;if("file"===c.kind){var r=function(){var t=c.getAsFile(),e=URL.createObjectURL(t);return o.onload=function(){n.pushCanvas(o.width,o.height),n.topLayerCtx.canvas.classList.add("background-layer-canvas"),n.topLayerCtx.drawImage(o,0,0),URL.revokeObjectURL(e)},o.setAttribute("src",e),"break"}();if("break"===r)break}}}catch(l){i.e(l)}finally{i.f()}},toCanvasCoords:function(t,e){var n=this.$refs.canvasContainer.getBoundingClientRect(),o=n.x,s=n.y;return{x:t-o,y:e-s}},onSelectTool:function(t){this.tool=t},onSelectColor:function(t){this.lineColor=t},onSelectLineThickness:function(t){this.lineWidth=t}}},E=P,R=(n("5c0b"),Object(x["a"])(E,s,i,!1,null,null,null)),D=R.exports,W=n("9483");Object(W["a"])("".concat("/edit/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(t){console.error("Error during service worker registration:",t)}}),o["a"].config.productionTip=!1,new o["a"]({render:function(t){return t(D)}}).$mount("#app")},"5c0b":function(t,e,n){"use strict";var o=n("9c0c"),s=n.n(o);s.a},"72ef":function(t,e,n){},"7d41":function(t,e,n){"use strict";var o=n("72ef"),s=n.n(o);s.a},"9c0c":function(t,e,n){},b5b1:function(t,e,n){"use strict";var o=n("20b4"),s=n.n(o);s.a}});
//# sourceMappingURL=app.2d48f908.js.map