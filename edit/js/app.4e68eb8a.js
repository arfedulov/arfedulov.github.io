(function(t){function e(e){for(var i,a,r=e[0],c=e[1],l=e[2],u=0,d=[];u<r.length;u++)a=r[u],Object.prototype.hasOwnProperty.call(s,a)&&s[a]&&d.push(s[a][0]),s[a]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(t[i]=c[i]);h&&h(e);while(d.length)d.shift()();return o.push.apply(o,l||[]),n()}function n(){for(var t,e=0;e<o.length;e++){for(var n=o[e],i=!0,r=1;r<n.length;r++){var c=n[r];0!==s[c]&&(i=!1)}i&&(o.splice(e--,1),t=a(a.s=n[0]))}return t}var i={},s={app:0},o=[];function a(e){if(i[e])return i[e].exports;var n=i[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=t,a.c=i,a.d=function(t,e,n){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)a.d(n,i,function(e){return t[e]}.bind(null,i));return n},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="/edit/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=e,r=r.slice();for(var l=0;l<r.length;l++)e(r[l]);var h=c;o.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"20b4":function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var i=n("2b0e"),s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app",tabindex:"0"},on:{paste:t.onPaste,keyup:t.onKeyUp,mouseup:t.onMouseUp,mousedown:t.onMouseDown,mousemove:t.onMouseMove}},[n("tool-bar",{attrs:{"active-tool":t.tool,"active-color":t.lineColor,"line-thickness":t.lineWidth},on:{"select-tool":t.onSelectTool,"select-color":t.onSelectColor,"select-line-thickness":t.onSelectLineThickness}}),n("img",{ref:"offscreenImage",staticClass:"offscreen"}),n("div",{staticClass:"canvas-container"},[n("canvas",{ref:"hiddenLayerCanvas",staticClass:"hidden-layer-canvas",attrs:{width:t.canvasWidth,height:t.canvasHeight}}),n("canvas",{ref:"mainCanvas",staticClass:"main-canvas",attrs:{width:t.canvasWidth,height:t.canvasHeight}})]),""!==t.status?n("status-bar",{attrs:{value:t.status}}):t._e()],1)},o=[],a=(n("d3b7"),n("3ca3"),n("ddb0"),n("2b3d"),n("b85c")),r=n("ade3"),c=(n("13d5"),n("b64b"),1),l="#EB6F09",h={LINE:"line",PATH:"path",RECT:"rect",ARROW:"arrow",SELECT:"select"},u=Object.keys(h).reduce((function(t,e,n){return t[e]=n+1,t}),{}),d=Object.keys(h).reduce((function(t,e,n){return t[n+1]=e,t}),{}),v=["#E3310E","#D2DB1F","#9808D1"],f=v[0],b=function(t,e){var n=e.x,i=e.y,s=e.dx,o=e.dy,a=e.color,r=void 0===a?f:a,l=e.thickness,h=void 0===l?c:l;t.strokeStyle=r,t.lineWidth=h,t.beginPath(),t.moveTo(n,i),t.lineTo(s,o),t.stroke();var u=Math.atan2(o-i,s-n);t.save(),t.translate(s,o),t.rotate(u-1.1*Math.PI),t.beginPath(),t.moveTo(0,0),t.lineTo(20,20),t.stroke(),t.restore(),t.save(),t.translate(s,o),t.rotate(u+.6*Math.PI),t.beginPath(),t.moveTo(0,0),t.lineTo(20,20),t.stroke(),t.restore()},y=function(t){var e=t||{},n=e.width,i=e.height,s=document.createElement("canvas");return s.width=n,s.height=i,s},p=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"tool-bar"},[n("div",{staticClass:"tools"},t._l(t.tools,(function(e){return n("div",{key:e.name,staticClass:"tool-button",class:{selected:t.activeTool===e.name},attrs:{name:e.name},on:{click:function(n){return t.selectTool(e.name)}}},[t._v(" "+t._s(e.keyboardKey)+" "+t._s(e.name)+" ")])})),0),n("div",{staticClass:"color-controls"},t._l(t.colors,(function(e){return n("div",{key:e,staticClass:"color-control",class:{selected:e===t.activeColor},style:{backgroundColor:e},on:{click:function(n){return t.selectColor(e)}}})})),0),n("div",{staticClass:"thickness-controls"},[n("div",{staticClass:"thicknes-button",class:{selected:1===t.lineThickness},on:{click:function(e){return t.selectLineThickness(1)}}},[t._v("1.0x")]),n("div",{staticClass:"thicknes-button",class:{selected:2.5===t.lineThickness},on:{click:function(e){return t.selectLineThickness(2.5)}}},[t._v("2.5x")]),n("div",{staticClass:"thicknes-button",class:{selected:5===t.lineThickness},on:{click:function(e){return t.selectLineThickness(5)}}},[t._v("5.0x")])]),n("div",{staticClass:"info"},[t._v(" Use keyboard: Ctrl + C | Ctrl + X | Ctrl + V ")])])},C=[],g=(n("4160"),n("a9e3"),n("159b"),n("2909")),k={name:"ToolBar",props:{activeTool:{type:String,required:!0},activeColor:{type:String,required:!0},lineThickness:{type:Number,required:!0}},computed:{tools:function(){var t=[];return Object.keys(h).forEach((function(e){t.push({name:h[e],keyboardKey:u[e]})})),t.sort((function(t,e){return t.keyboardKey-e.keyboardKey})),t},colors:function(){return Object(g["a"])(v)}},methods:{selectTool:function(t){this.$emit("select-tool",t)},selectColor:function(t){this.$emit("select-color",t)},selectLineThickness:function(t){this.$emit("select-line-thickness",t)}}},m=k,w=(n("7d41"),n("2877")),x=Object(w["a"])(m,p,C,!1,null,"9294ee70",null),T=x.exports,L=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"status-bar"},[t._v(" "+t._s(t.value)+" ")])},S=[],_={name:"StatusBar",props:{value:{type:String,default:""}}},O=_,P=(n("b5b1"),Object(w["a"])(O,L,S,!1,null,"2b2b979a",null)),j=P.exports,R={name:"App",components:{ToolBar:T,StatusBar:j},data:function(){return{canvasWidth:900,canvasHeight:600,mainCtx:null,hiddenLayerCtx:null,tool:h.PATH,mousePressed:!1,startX:0,startY:0,selection:void 0,lineColor:f,lineWidth:c,status:""}},mounted:function(){this.mainCtx=this.$refs.mainCanvas.getContext("2d"),this.hiddenLayerCtx=this.$refs.hiddenLayerCanvas.getContext("2d")},methods:{resetSelection:function(){this.selection=void 0},resetLineStyle:function(){this.hiddenLayerCtx.strokeStyle=this.lineColor,this.hiddenLayerCtx.lineWidth=this.lineWidth,this.hiddenLayerCtx.setLineDash([])},onMouseDown:function(t){this.resetSelection(),this.mousePressed=!0;var e=this.toCanvasCoords(t.clientX,t.clientY),n=e.x,i=e.y;this.startX=n,this.startY=i,this.resetLineStyle(),"path"===this.tool&&(this.hiddenLayerCtx.beginPath(),this.hiddenLayerCtx.moveTo(n,i))},onMouseMove:function(t){if(this.mousePressed){var e=this.toCanvasCoords(t.clientX,t.clientY),n=e.x,i=e.y,s=this.hiddenLayerCtx,o=this.startX,a=this.startY;switch(this.tool){case"path":s.lineTo(n,i),s.stroke();break;case"line":s.clearRect(0,0,s.canvas.width,s.canvas.height),s.beginPath(),s.moveTo(o,a),s.lineTo(n,i),s.stroke();break;case"rect":s.clearRect(0,0,s.canvas.width,s.canvas.height),s.strokeRect(o,a,n-o,i-a);break;case"select":s.setLineDash([15,5]),s.strokeStyle=l,s.lineWidth=c,s.clearRect(0,0,s.canvas.width,s.canvas.height),s.strokeRect(o,a,n-o,i-a);break;case"arrow":s.clearRect(0,0,s.canvas.width,s.canvas.height),b(s,{x:o,y:a,dx:n,dy:i,color:this.lineColor,thickness:this.lineWidth});break;default:break}}},onMouseUp:function(t){this.mousePressed=!1;var e=this.toCanvasCoords(t.clientX,t.clientY),n=e.x,i=e.y;if("select"!==this.tool){var s=this.mainCtx,o=this.hiddenLayerCtx;s.drawImage(o.canvas,0,0),o.clearRect(0,0,o.canvas.width,o.canvas.height)}else{var a=this.startX,r=this.startY;this.selection={x:a,y:r,width:n-a,height:i-r}}},onKeyUp:function(t){var e=this;if(("KeyX"===t.code||"KeyC"===t.code)&&t.ctrlKey){var n=this.selection;if(!n)return;var i=y({width:n.width,height:n.height});i.getContext("2d").drawImage(this.$refs.mainCanvas,n.x,n.y,n.width,n.height,0,0,n.width,n.height),i.toBlob((function(t){var n=new ClipboardItem(Object(r["a"])({},t.type,t));navigator.clipboard.write([n]).then((function(){return e.onCopy()}))}),"image/png",1),"KeyX"===t.code&&(this.mainCtx.clearRect(n.x,n.y,n.width,n.height),this.hiddenLayerCtx.clearRect(0,0,this.hiddenLayerCtx.canvas.width,this.hiddenLayerCtx.canvas.height),this.resetSelection())}switch(t.code){case"Digit1":this.tool=h[d[1]];break;case"Digit2":this.tool=h[d[2]];break;case"Digit3":this.tool=h[d[3]];break;case"Digit4":this.tool=h[d[4]];break;case"Digit5":this.tool=h[d[5]];break}},onCopy:function(){this.setStatus("Copied to clipboard",2)},setStatus:function(t,e){var n=this;this.status=t,window.setTimeout((function(){return n.status=""}),1e3*e)},onPaste:function(t){var e,n=this.$refs,i=n.offscreenImage,s=n.hiddenLayerCanvas,o=n.mainCanvas,r=this.mainCtx,c=(t.clipboardData||t.originalEvent.clipboardData).items,l=Object(a["a"])(c);try{for(l.s();!(e=l.n()).done;){var h=e.value;if("file"===h.kind){var u=function(){var t=h.getAsFile(),e=URL.createObjectURL(t);return i.onload=function(){o.width=i.width,o.height=i.height,s.width=i.width,s.height=i.height,r.drawImage(i,0,0),URL.revokeObjectURL(e)},i.setAttribute("src",e),"break"}();if("break"===u)break}}}catch(d){l.e(d)}finally{l.f()}},toCanvasCoords:function(t,e){var n=this.$refs.mainCanvas.getBoundingClientRect(),i=n.x,s=n.y;return{x:t-i,y:e-s}},onSelectTool:function(t){this.tool=t},onSelectColor:function(t){this.lineColor=t},onSelectLineThickness:function(t){this.lineWidth=t}}},M=R,D=(n("5c0b"),Object(w["a"])(M,s,o,!1,null,null,null)),E=D.exports;i["a"].config.productionTip=!1,new i["a"]({render:function(t){return t(E)}}).$mount("#app")},"5c0b":function(t,e,n){"use strict";var i=n("9c0c"),s=n.n(i);s.a},"72ef":function(t,e,n){},"7d41":function(t,e,n){"use strict";var i=n("72ef"),s=n.n(i);s.a},"9c0c":function(t,e,n){},b5b1:function(t,e,n){"use strict";var i=n("20b4"),s=n.n(i);s.a}});
//# sourceMappingURL=app.4e68eb8a.js.map